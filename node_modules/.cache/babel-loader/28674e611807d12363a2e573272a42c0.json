{"ast":null,"code":"var _jsxFileName = \"/root/\\xC1rea de trabalho/Sistema Patricia/frontend/src/AdminComponents/Mensagem/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport './styles.css';\nimport api from '../../services/api';\nimport bolosImage from '../../icones/bolos.jpg';\nimport Header from '../AdminHeader';\nimport Body from '../AdminBody';\nimport Detalhes from '../../components/Detalhes';\n\nfunction Mensagem() {\n  const [mensagem, setMensagem] = useState([]);\n  const [detalhesMensagem, setDetalhesMensagem] = useState(null);\n\n  async function detalharMensagem(id) {\n    const mensagemEspecifica = mensagem.filter(element => element.id === id);\n\n    if (mensagemEspecifica[0].status !== 'L') {\n      await api.put(`mensagem/${id}`, {\n        status: 'L'\n      });\n      const newMessage = mensagem.map(element => {\n        if (element.id === id) return { ...element,\n          status: 'L'\n        };\n        return element;\n      });\n      setMensagem(newMessage);\n      mensagemEspecifica[0].status = 'L';\n    }\n\n    setDetalhesMensagem(mensagemEspecifica[0]);\n  }\n\n  async function buscaMensagem() {\n    const requestMensagem = await api.get('mensagem');\n\n    if (typeof requestMensagem.data === 'object') {\n      setMensagem(requestMensagem.data);\n      console.log('requestMensagem.data', requestMensagem.data);\n    } else {\n      console.log('Erouuuuuu!');\n    }\n  }\n\n  useEffect(function () {\n    buscaMensagem();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, detalhesMensagem && /*#__PURE__*/React.createElement(Detalhes, {\n    header: detalhesMensagem.nome,\n    open: true,\n    onClose: () => setDetalhesMensagem(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"Nome: \", detalhesMensagem.nome), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, \"E-mail: \", detalhesMensagem.email), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, detalhesMensagem.assunto), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, detalhesMensagem.mensagem), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, `${detalhesMensagem.data_hora.trim().split(' ')[0].split('-')[2]}/${detalhesMensagem.data_hora.trim().split(' ')[0].split('-')[1]}/${detalhesMensagem.data_hora.trim().split(' ')[0].split('-')[0]} - ${detalhesMensagem.data_hora.trim().split(' ')[1]}`), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, detalhesMensagem.status === 'A' ? 'Não lida' : 'Lida')), /*#__PURE__*/React.createElement(Header, {\n    imagem: bolosImage,\n    buscarId: \"buscar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"identify\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 23\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 23\n    }\n  }, \"NOME\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 23\n    }\n  }, \"ASSUNTO\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 23\n    }\n  }, \"DATA\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, mensagem.map(element => /*#__PURE__*/React.createElement(\"tr\", {\n    key: element.id,\n    onClick: () => detalharMensagem(element.id),\n    style: {\n      fontWeight: element.status === 'A' ? 'bold' : 'normal',\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 23\n    }\n  }, element.status === 'A' ? 'Não lida' : 'Lida'), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"identify\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 23\n    }\n  }, element.id), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 23\n    }\n  }, element.nome), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 23\n    }\n  }, element.assunto), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 23\n    }\n  }, `${element.data_hora.trim().split(' ')[0].split('-')[2]}/${element.data_hora.trim().split(' ')[0].split('-')[1]}/${element.data_hora.trim().split(' ')[0].split('-')[0]} - ${element.data_hora.trim().split(' ')[1]}`))))))));\n}\n\nexport default Mensagem;","map":{"version":3,"sources":["/root/Área de trabalho/Sistema Patricia/frontend/src/AdminComponents/Mensagem/index.js"],"names":["React","useEffect","useState","api","bolosImage","Header","Body","Detalhes","Mensagem","mensagem","setMensagem","detalhesMensagem","setDetalhesMensagem","detalharMensagem","id","mensagemEspecifica","filter","element","status","put","newMessage","map","buscaMensagem","requestMensagem","get","data","console","log","nome","email","assunto","data_hora","trim","split","fontWeight","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './styles.css';\r\n\r\nimport api from '../../services/api'\r\n\r\nimport bolosImage from '../../icones/bolos.jpg'\r\n\r\nimport Header from '../AdminHeader'\r\nimport Body from '../AdminBody'\r\nimport Detalhes from '../../components/Detalhes'\r\n\r\nfunction Mensagem() {\r\n  const [mensagem, setMensagem] = useState([]);\r\n  const [detalhesMensagem, setDetalhesMensagem] = useState(null);\r\n\r\n  async function detalharMensagem(id) {\r\n    const mensagemEspecifica = mensagem.filter(element => element.id === id)\r\n    if(mensagemEspecifica[0].status !== 'L'){\r\n      await api.put(`mensagem/${id}`, {status: 'L'});\r\n      const newMessage = mensagem.map(element => {\r\n        if(element.id === id)\r\n          return {...element, status: 'L'}\r\n        return element\r\n      } )\r\n      setMensagem(newMessage);\r\n      mensagemEspecifica[0].status = 'L'\r\n    }\r\n    setDetalhesMensagem(mensagemEspecifica[0]);\r\n  }\r\n\r\n  async function buscaMensagem() {\r\n    const requestMensagem = await api.get('mensagem');\r\n    if(typeof requestMensagem.data === 'object'){\r\n      setMensagem(requestMensagem.data);\r\n      console.log('requestMensagem.data', requestMensagem.data)\r\n    }else {\r\n      console.log('Erouuuuuu!')\r\n    }\r\n  }\r\n\r\n  useEffect(function(){\r\n    buscaMensagem();\r\n  },[]);\r\n  return (\r\n    <>\r\n      {detalhesMensagem &&\r\n      <Detalhes header={detalhesMensagem.nome} open={ true } onClose={() => setDetalhesMensagem(null)}>\r\n        <h1>Nome: {detalhesMensagem.nome}</h1>\r\n        <h1>E-mail: {detalhesMensagem.email}</h1>\r\n        <p>{detalhesMensagem.assunto}</p>\r\n        <p>{detalhesMensagem.mensagem}</p>\r\n        <p>\r\n        {\r\n            `${ detalhesMensagem.data_hora.trim().split(' ')[0].split('-')[2] }/${ detalhesMensagem.data_hora.trim().split(' ')[0].split('-')[1] }/${ detalhesMensagem.data_hora.trim().split(' ')[0].split('-')[0] } - ${ detalhesMensagem.data_hora.trim().split(' ')[1] }`\r\n        }\r\n        </p>\r\n        <span>{(detalhesMensagem.status === 'A')? 'Não lida' : 'Lida'}</span>\r\n      </Detalhes>\r\n      }\r\n      <Header imagem={bolosImage} buscarId=\"buscar\"/>\r\n      <Body>\r\n        <div className=\"table-container\">\r\n          <table>\r\n              <thead>\r\n                  <tr>\r\n                      <th></th>\r\n                      <th className=\"identify\">ID</th>\r\n                      <th>NOME</th>\r\n                      <th>ASSUNTO</th>\r\n                      <th>DATA</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody>\r\n                {\r\n                  mensagem.map(element => (\r\n                    <tr key={element.id} onClick={ () => detalharMensagem( element.id ) } style={{ fontWeight: (element.status === 'A')? 'bold' : 'normal', cursor: 'pointer' }}>\r\n                      <th>{ (element.status === 'A')? 'Não lida' : 'Lida' }</th>\r\n                      <td className=\"identify\">{ element.id }</td>\r\n                      <td>{ element.nome }</td>\r\n                      <td>{ element.assunto }</td>\r\n                      <td>\r\n                        {\r\n                            `${ element.data_hora.trim().split(' ')[0].split('-')[2] }/${ element.data_hora.trim().split(' ')[0].split('-')[1] }/${ element.data_hora.trim().split(' ')[0].split('-')[0] } - ${ element.data_hora.trim().split(' ')[1] }`\r\n                        }\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                }\r\n              </tbody>\r\n          </table>\r\n        </div>\r\n      </Body>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Mensagem;\r\n"]},"metadata":{},"sourceType":"module"}